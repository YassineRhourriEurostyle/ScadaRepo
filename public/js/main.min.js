function setColorFromText(text){var nbr=7;var from=70;var to=320;var md5=MD5(text);var m=parseInt(md5,16)%nbr;var c={h:from+((to-from)*m/nbr),l:0.47,s:0.86};return hslToRGB(c)}
function changeHue(rgb,degree){var hsl=rgbToHSL(rgb);hsl.h+=degree;if(hsl.h>360){hsl.h-=360}else if(hsl.h<0){hsl.h+=360}
return hslToRGB(hsl)}
function rgbToHSL(rgb){rgb=rgb.replace(/^\s*#|\s*$/g,'');if(rgb.length==3){rgb=rgb.replace(/(.)/g,'$1$1')}
var r=parseInt(rgb.substr(0,2),16)/255,g=parseInt(rgb.substr(2,2),16)/255,b=parseInt(rgb.substr(4,2),16)/255,cMax=Math.max(r,g,b),cMin=Math.min(r,g,b),delta=cMax-cMin,l=(cMax+cMin)/2,h=0,s=0;if(delta==0){h=0}else if(cMax==r){h=60*(((g-b)/delta)%6)}else if(cMax==g){h=60*(((b-r)/delta)+2)}else{h=60*(((r-g)/delta)+4)}
if(delta==0){s=0}else{s=(delta/(1-Math.abs(2*l-1)))}
return{h:h,s:s,l:l}}
function hslToRGB(hsl){var h=hsl.h,s=hsl.s,l=hsl.l,c=(1-Math.abs(2*l-1))*s,x=c*(1-Math.abs((h/60)%2-1)),m=l-c/2,r,g,b;if(h<60){r=c;g=x;b=0}else if(h<120){r=x;g=c;b=0}else if(h<180){r=0;g=c;b=x}else if(h<240){r=0;g=x;b=c}else if(h<300){r=x;g=0;b=c}else{r=c;g=0;b=x}
r=normalize_rgb_value(r,m);g=normalize_rgb_value(g,m);b=normalize_rgb_value(b,m);return rgbToHex(r,g,b)}
function normalize_rgb_value(color,m){color=Math.floor((color+m)*255);if(color<0){color=0}
return color}
function rgbToHex(r,g,b){return"#"+((1<<24)+(r<<16)+(g<<8)+b).toString(16).slice(1)}
function desaturate(hexColor,index){var hsl=rgbToHSL(hexColor);hsl.l=hsl.l+(1-hsl.l)*index/(index+2);return hslToRGB(hsl)};$(function(){$('table').each(function(){if(!$(this).attr('id'))
$(this).attr('id',makeid(8))});var mouseCurrDiv=!1;$(document).keydown(function(e){if(e.keyCode==27&&!e.ctrlKey&&!e.altKey&&!e.shiftKey){e.preventDefault();$('#divCapture').hide();$('*').removeClass('divCapture');mouseCurrDiv=!1;return}else if(e.keyCode==80&&e.ctrlKey&&e.altKey&&e.shiftKey){e.preventDefault();mouseCurrDiv=!0;return}else if(e.keyCode==80&&e.ctrlKey&&e.altKey&&!e.shiftKey){e.preventDefault();saveCapture('article');return}
return});$(document).on('mousedown',function(e){if(!mouseCurrDiv)
return;e.preventDefault();$('#divCapture').hide();var o=$('.divCapture');$('.divCapture').removeClass('divCapture');mouseCurrDiv=!1;saveCapture(o.attr('id'));return});$('*').on('mouseover',document,function(e){if(!mouseCurrDiv)
return;var o=$(event.target);while(!$(o).attr('id')||$(o).attr('id')=='divCapture'){if(o.prop("tagName")===undefined)
return;o=$(o).parent()}
if(o.prop("tagName")===undefined)
return;$('.divCapture').removeClass('divCapture');$(o).addClass('divCapture');$('#divCapture').show();$('#divCapture').css('left',$(o).offset().left);$('#divCapture').css('top',$(o).offset().top);$('#divCapture').css('width',$(o).width());$('#divCapture').css('height',$(o).height())})});function saveCapture(id){$("#screenCaptureInProgress").modal('show');var top=$(window).scrollTop();$(window).scrollTop(0);html2canvas(document.querySelector("#"+id)).then(canvas=>{var img=canvas.toDataURL("image/png").replace("image/png","image/octet-stream");var link=document.getElementById('savePagePNGLink');var d=new Date();link.setAttribute('download','ScreenCapture-'+d.toISOString()+'.png');link.setAttribute('href',img);hideLoading();link.click();$(window).scrollTop(top);return})};var stIsIE=!1;sorttable={init:function(){if(arguments.callee.done)
return;arguments.callee.done=!0;if(_timer)
clearInterval(_timer);if(!document.createElement||!document.getElementsByTagName)
return;sorttable.DATE_RE=/^(\d\d?)[\/\.-](\d\d?)[\/\.-]((\d\d)?\d\d)$/;forEach(document.getElementsByTagName('table'),function(table){if(table.className.search(/\bsortable\b/)!=-1){sorttable.makeSortable(table)}})},makeSortable:function(table){if(table.getElementsByTagName('thead').length>1){return}
if(table.className.match(/\bsorttable_nosort\b/)){return}
if(table.getElementsByTagName('thead').length==0){the=document.createElement('thead');the.appendChild(table.rows[0]);table.insertBefore(the,table.firstChild)}
if(table.tHead==null)
table.tHead=table.getElementsByTagName('thead')[0];if(table.tHead.rows.length!=1)
return;sortbottomrows=[];for(var i=0;i<table.rows.length;i++){if(table.rows[i].className.search(/\bsortbottom\b/)!=-1){sortbottomrows[sortbottomrows.length]=table.rows[i]}}
if(sortbottomrows){if(table.tFoot==null){tfo=document.createElement('tfoot');table.appendChild(tfo)}
for(var i=0;i<sortbottomrows.length;i++){tfo.appendChild(sortbottomrows[i])}
delete sortbottomrows}
headrow=table.tHead.rows[0].cells;for(var i=0;i<headrow.length;i++){if(!headrow[i].className.match(/\bsorttable_nosort\b/)){mtch=headrow[i].className.match(/\bsorttable_([a-z0-9]+)\b/);if(mtch){override=mtch[1];console.log(override)}
if(mtch&&typeof sorttable["sort_"+override]=='function'){headrow[i].sorttable_sortfunction=sorttable["sort_"+override];headrow[i].className+=' sortable'}else{headrow[i].sorttable_sortfunction=sorttable.guessType(table,i);if(headrow[i].sorttable_sortfunction===!1)
headrow[i].className+=' sorttable_nosort';else headrow[i].className+=' sortable'}
headrow[i].sorttable_columnindex=i;headrow[i].sorttable_tbody=table.tBodies[0];dean_addEvent(headrow[i],"click",sorttable.innerSortFunction=function(e){if($('input:focus').length)
return;if(this.className.search(/\bsorttable_sorted\b/)!=-1){sorttable.reverse(this.sorttable_tbody);this.className=this.className.replace('sorttable_sorted','sorttable_sorted_reverse');if(document.getElementById('sorttable_sortfwdind'))
this.removeChild(document.getElementById('sorttable_sortfwdind'));sortrevind=document.createElement('span');sortrevind.id="sorttable_sortrevind";sortrevind.innerHTML=stIsIE?'&nbsp<font face="webdings">5</font>':'&nbsp;&#x25B4;';$(this).css('background-image','url(/img/th-sortable-up.png)');return}
if(this.className.search(/\bsorttable_sorted_reverse\b/)!=-1){sorttable.reverse(this.sorttable_tbody);this.className=this.className.replace('sorttable_sorted_reverse','sorttable_sorted');this.removeChild(document.getElementById('sorttable_sortrevind'));sortfwdind=document.createElement('span');sortfwdind.id="sorttable_sortfwdind";sortfwdind.innerHTML=stIsIE?'&nbsp<font face="webdings">6</font>':'&nbsp;&#x25BE;';$('#tableSortInProgress').modal('hide');return}
theadrow=this.parentNode;forEach(theadrow.childNodes,function(cell){if(cell.nodeType==1){cell.className=cell.className.replace('sorttable_sorted_reverse','');cell.className=cell.className.replace('sorttable_sorted','')}});sortfwdind=document.getElementById('sorttable_sortfwdind');if(sortfwdind){sortfwdind.parentNode.removeChild(sortfwdind)}
sortrevind=document.getElementById('sorttable_sortrevind');if(sortrevind){sortrevind.parentNode.removeChild(sortrevind)}
this.className+=' sorttable_sorted';sortfwdind=document.createElement('span');sortfwdind.id="sorttable_sortfwdind";sortfwdind.innerHTML=stIsIE?'&nbsp<font face="webdings">6</font>':'&nbsp;&#x25BE;';row_array=[];col=this.sorttable_columnindex;rows=this.sorttable_tbody.rows;for(var j=0;j<rows.length;j++){row_array[row_array.length]=[sorttable.getInnerText(rows[j].cells[col]),rows[j]]}
sorttable.shaker_sort(row_array,this.sorttable_sortfunction);tb=this.sorttable_tbody;for(var j=0;j<row_array.length;j++){tb.appendChild(row_array[j][1])}
delete row_array;$('#tableSortInProgress').modal('hide')})}}
for(var i=0;i<headrow.length;i++){if(!headrow[i].className.match(/\bsorttable_nosort\b/)){var title=headrow[i].innerText;var html='<input list="sorttable_list_'+i+'" data-prev="" type="text" class="sorttable_filter" placeholder="'+title+'"/>'
if(table.tBodies[0].rows.length<100){var t=new Array();for(var j=0;j<table.tBodies[0].rows.length;j++){if(sorttable.getInnerText(table.tBodies[0].rows[j].cells[i]))
t.push('<option value="'+sorttable.getInnerText(table.tBodies[0].rows[j].cells[i])+'"/>')}
t.sort();t2=Array.from(new Set(t));if(t.length>t2.length)
html+='<datalist id="sorttable_list_'+i+'">'+t2.join('')+'</datalist>'}
headrow[i].innerHTML=html}}
var tBody=$(table).find('tbody');var rows;if(tBody.length>1){rows=tBody}else{rows=tBody.find('tr')}
if(!$('td[data-filter-0]').length){rows.each(function(){var row=$(this);var i=0;$('th > input.sorttable_filter').each(function(){if(!$(row).attr('data-filter-'+i)){$(row).attr('data-filter-'+i,'');var text=$(row).find('td:eq('+i+')').text().toLowerCase().trim().replace(/\t+/g,'').replace(/\n+/g,'').replace(/\r+/g,'').replace(/\s+/g,' ');$(row).attr('data-filter-'+i,text)}
i++})})}},guessType:function(table,column){sortfn=sorttable.sort_alpha;concat='';for(var i=0;i<table.tBodies[0].rows.length;i++){text=sorttable.getInnerText(table.tBodies[0].rows[i].cells[column]);concat+=text;if(text!=''){text=text.split(' ').join('');if(text.indexOf("\n")>=0)
text=text.substring(0,text.indexOf("\n"));if(text.match(/^-?[�$�]?[\d,.]+%?$/)){return sorttable.sort_numeric}
possdate=text.match(sorttable.DATE_RE);if(possdate){first=parseInt(possdate[1]);second=parseInt(possdate[2]);if(first>12){return sorttable.sort_ddmm}else if(second>12){return sorttable.sort_mmdd}else{sortfn=sorttable.sort_ddmm}}}}
if(concat=='')
return!1;return sortfn},getInnerText:function(node){if(!node)
return"";hasInputs=(typeof node.getElementsByTagName=='function')&&node.getElementsByTagName('input').length;try{if(node.getAttribute("sorttable_customkey")!=null){return node.getAttribute("sorttable_customkey")}else if(typeof node.textContent!='undefined'&&!hasInputs){return node.textContent.replace(/^\s+|\s+$/g,'')}else if(typeof node.innerText!='undefined'&&!hasInputs){return node.innerText.replace(/^\s+|\s+$/g,'')}else if(typeof node.text!='undefined'&&!hasInputs){return node.text.replace(/^\s+|\s+$/g,'')}else{switch(node.nodeType){case 3:if(node.nodeName.toLowerCase()=='input'){return node.value.replace(/^\s+|\s+$/g,'')}
case 4:return node.nodeValue.replace(/^\s+|\s+$/g,'');break;case 1:case 11:var innerText='';for(var i=0;i<node.childNodes.length;i++){innerText+=sorttable.getInnerText(node.childNodes[i])}
return innerText.replace(/^\s+|\s+$/g,'');break;default:return''}}}catch(e){return''}},reverse:function(tbody){newrows=[];for(var i=0;i<tbody.rows.length;i++){newrows[newrows.length]=tbody.rows[i]}
for(var i=newrows.length-1;i>=0;i--){tbody.appendChild(newrows[i])}
delete newrows},sort_numeric:function(a,b){aa=parseFloat(a[0].replace(/[^0-9.-]/g,''));if(isNaN(aa))
aa=0;bb=parseFloat(b[0].replace(/[^0-9.-]/g,''));if(isNaN(bb))
bb=0;return aa-bb},sort_alpha:function(a,b){if(a[0]==b[0])
return 0;if(a[0]<b[0])
return-1;return 1},sort_ddmm:function(a,b){mtch=a[0].match(sorttable.DATE_RE);y=mtch[3];m=mtch[2];d=mtch[1];if(m.length==1)
m='0'+m;if(d.length==1)
d='0'+d;dt1=y+m+d;mtch=b[0].match(sorttable.DATE_RE);y=mtch[3];m=mtch[2];d=mtch[1];if(m.length==1)
m='0'+m;if(d.length==1)
d='0'+d;dt2=y+m+d;if(dt1==dt2)
return 0;if(dt1<dt2)
return-1;return 1},sort_mmdd:function(a,b){mtch=a[0].match(sorttable.DATE_RE);y=mtch[3];d=mtch[2];m=mtch[1];if(m.length==1)
m='0'+m;if(d.length==1)
d='0'+d;dt1=y+m+d;mtch=b[0].match(sorttable.DATE_RE);y=mtch[3];d=mtch[2];m=mtch[1];if(m.length==1)
m='0'+m;if(d.length==1)
d='0'+d;dt2=y+m+d;if(dt1==dt2)
return 0;if(dt1<dt2)
return-1;return 1},shaker_sort:function(list,comp_func){var b=0;var t=list.length-1;var swap=!0;while(swap){swap=!1;for(var i=b;i<t;++i){if(comp_func(list[i],list[i+1])>0){var q=list[i];list[i]=list[i+1];list[i+1]=q;swap=!0}}
t--;if(!swap)
break;for(var i=t;i>b;--i){if(comp_func(list[i],list[i-1])<0){var q=list[i];list[i]=list[i-1];list[i-1]=q;swap=!0}}
b++}}}
if(document.addEventListener){document.addEventListener("DOMContentLoaded",sorttable.init,!1)}
if(/WebKit/i.test(navigator.userAgent)){var _timer=setInterval(function(){if(/loaded|complete/.test(document.readyState)){sorttable.init()}},10)}
window.onload=sorttable.init;function dean_addEvent(element,type,handler){if(element.addEventListener){element.addEventListener(type,handler,!1)}else{if(!handler.$$guid)
handler.$$guid=dean_addEvent.guid++;if(!element.events)
element.events={};var handlers=element.events[type];if(!handlers){handlers=element.events[type]={};if(element["on"+type]){handlers[0]=element["on"+type]}}
handlers[handler.$$guid]=handler;element["on"+type]=handleEvent}};dean_addEvent.guid=1;function removeEvent(element,type,handler){if(element.removeEventListener){element.removeEventListener(type,handler,!1)}else{if(element.events&&element.events[type]){delete element.events[type][handler.$$guid]}}};function handleEvent(event){var returnValue=!0;event=event||fixEvent(((this.ownerDocument||this.document||this).parentWindow||window).event);var handlers=this.events[event.type];for(var i in handlers){this.$$handleEvent=handlers[i];if(this.$$handleEvent(event)===!1){returnValue=!1}}
return returnValue};function fixEvent(event){event.preventDefault=fixEvent.preventDefault;event.stopPropagation=fixEvent.stopPropagation;return event};fixEvent.preventDefault=function(){this.returnValue=!1};fixEvent.stopPropagation=function(){this.cancelBubble=!0}
if(!Array.forEach){Array.forEach=function(array,block,context){for(var i=0;i<array.length;i++){block.call(context,array[i],i,array)}}}
Function.prototype.forEach=function(object,block,context){for(var key in object){if(typeof this.prototype[key]=="undefined"){block.call(context,object[key],key,object)}}};String.forEach=function(string,block,context){Array.forEach(string.split(""),function(chr,index){block.call(context,chr,index,string)})};var forEach=function(object,block,context){if(object){var resolve=Object;if(object instanceof Function){resolve=Function}else if(object.forEach instanceof Function){object.forEach(block,context);return}else if(typeof object=="string"){resolve=String}else if(typeof object.length=="number"){resolve=Array}
resolve.forEach(object,block,context)}};$(function(){$('th > input.sorttable_filter').on('click',function(e){e.preventDefault()});var timeout=null;$('th > input.sorttable_filter').on('keyup',function(e){if(e.keyCode==27&&!e.repeat){$(this).val('')}
if(e.keyCode==27&&e.repeat){$('th > input.sorttable_filter[value!=""]').val('')}
clearTimeout(timeout);var input=$(this);setTimeout(function(){var tBody=input.closest('table').find('tbody');var rows=tBody.find('tr');if(tBody.length>1){tBody=input.closest('table');rows=tBody.find('tbody')}
var filters='';var i=0;$('th > input.sorttable_filter').each(function(){if($(this).val())
filters+='[data-filter-'+i+'*="'+$(this).val().toLowerCase()+'"]';i++});if(filters!=''){rows.hide();rows.filter(filters).show()}else{rows.show()}},1000)})});var MD5=function(d){result=M(V(Y(X(d),8*d.length)));return result.toLowerCase()};function M(d){for(var _,m="0123456789ABCDEF",f="",r=0;r<d.length;r++)_=d.charCodeAt(r),f+=m.charAt(_>>>4&15)+m.charAt(15&_);return f}function X(d){for(var _=Array(d.length>>2),m=0;m<_.length;m++)_[m]=0;for(m=0;m<8*d.length;m+=8)_[m>>5]|=(255&d.charCodeAt(m/8))<<m%32;return _}function V(d){for(var _="",m=0;m<32*d.length;m+=8)_+=String.fromCharCode(d[m>>5]>>>m%32&255);return _}function Y(d,_){d[_>>5]|=128<<_%32,d[14+(_+64>>>9<<4)]=_;for(var m=1732584193,f=-271733879,r=-1732584194,i=271733878,n=0;n<d.length;n+=16){var h=m,t=f,g=r,e=i;f=md5_ii(f=md5_ii(f=md5_ii(f=md5_ii(f=md5_hh(f=md5_hh(f=md5_hh(f=md5_hh(f=md5_gg(f=md5_gg(f=md5_gg(f=md5_gg(f=md5_ff(f=md5_ff(f=md5_ff(f=md5_ff(f,r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+0],7,-680876936),f,r,d[n+1],12,-389564586),m,f,d[n+2],17,606105819),i,m,d[n+3],22,-1044525330),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+4],7,-176418897),f,r,d[n+5],12,1200080426),m,f,d[n+6],17,-1473231341),i,m,d[n+7],22,-45705983),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+8],7,1770035416),f,r,d[n+9],12,-1958414417),m,f,d[n+10],17,-42063),i,m,d[n+11],22,-1990404162),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+12],7,1804603682),f,r,d[n+13],12,-40341101),m,f,d[n+14],17,-1502002290),i,m,d[n+15],22,1236535329),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+1],5,-165796510),f,r,d[n+6],9,-1069501632),m,f,d[n+11],14,643717713),i,m,d[n+0],20,-373897302),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+5],5,-701558691),f,r,d[n+10],9,38016083),m,f,d[n+15],14,-660478335),i,m,d[n+4],20,-405537848),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+9],5,568446438),f,r,d[n+14],9,-1019803690),m,f,d[n+3],14,-187363961),i,m,d[n+8],20,1163531501),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+13],5,-1444681467),f,r,d[n+2],9,-51403784),m,f,d[n+7],14,1735328473),i,m,d[n+12],20,-1926607734),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+5],4,-378558),f,r,d[n+8],11,-2022574463),m,f,d[n+11],16,1839030562),i,m,d[n+14],23,-35309556),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+1],4,-1530992060),f,r,d[n+4],11,1272893353),m,f,d[n+7],16,-155497632),i,m,d[n+10],23,-1094730640),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+13],4,681279174),f,r,d[n+0],11,-358537222),m,f,d[n+3],16,-722521979),i,m,d[n+6],23,76029189),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+9],4,-640364487),f,r,d[n+12],11,-421815835),m,f,d[n+15],16,530742520),i,m,d[n+2],23,-995338651),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+0],6,-198630844),f,r,d[n+7],10,1126891415),m,f,d[n+14],15,-1416354905),i,m,d[n+5],21,-57434055),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+12],6,1700485571),f,r,d[n+3],10,-1894986606),m,f,d[n+10],15,-1051523),i,m,d[n+1],21,-2054922799),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+8],6,1873313359),f,r,d[n+15],10,-30611744),m,f,d[n+6],15,-1560198380),i,m,d[n+13],21,1309151649),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+4],6,-145523070),f,r,d[n+11],10,-1120210379),m,f,d[n+2],15,718787259),i,m,d[n+9],21,-343485551),m=safe_add(m,h),f=safe_add(f,t),r=safe_add(r,g),i=safe_add(i,e)}return Array(m,f,r,i)}function md5_cmn(d,_,m,f,r,i){return safe_add(bit_rol(safe_add(safe_add(_,d),safe_add(f,i)),r),m)}function md5_ff(d,_,m,f,r,i,n){return md5_cmn(_&m|~_&f,d,_,r,i,n)}function md5_gg(d,_,m,f,r,i,n){return md5_cmn(_&f|m&~f,d,_,r,i,n)}function md5_hh(d,_,m,f,r,i,n){return md5_cmn(_^m^f,d,_,r,i,n)}function md5_ii(d,_,m,f,r,i,n){return md5_cmn(m^(_|~f),d,_,r,i,n)}function safe_add(d,_){var m=(65535&d)+(65535&_);return(d>>16)+(_>>16)+(m>>16)<<16|65535&m}function bit_rol(d,_){return d<<_|d>>>32-_};$(function(){hideLoading()});function unLoad(){$("#loadMe").modal('show')}
window.onbeforeunload=unLoad;function hideLoading(){setTimeout(function(){$(".modal:visible").click()},200);console.log('hide modal')}
$(function(){$('a#menu_search_link').on('click',function(){if(!$('#menu_search:visible').length){$('#menu_search').show();$('#menu_search').focus();$('a#menu_search_link').hide()}})});function marginArticle(){$('.submenu a.nav-item').each(function(){$(this).html($(this).text().replace(' ','&nbsp;'));$(this).css('width',$(this).outerWidth()+'px')});if($(window).width()>845){var zindex=99;var h=20;if($('nav').length)
h+=$('nav').height();var width=0;if(0){width=$('li.nav-item.active').outerWidth();var left=Math.round($('li.nav-item.active').offset().left)+20;$('.nav-item.active').each(function(){if($(this).outerWidth()>width){width=$(this).outerWidth()}});$('.nav-item.active').css('width',width);$('div.submenu').each(function(){$(this).css('top',(h-20)+'px');$(this).css('z-index',zindex);zindex--;h+=$(this).outerHeight();if($(this).find('a.nav-item.active').length>0){var l=0;$(this).find('a.nav-item').css('position','absolute');$(this).find('a.nav-item.active').each(function(){$(this).css('left',left+'px');l=left+$(this).outerWidth()})}});$('div.submenu').each(function(){var opacity=1;if($(this).find('a.nav-item.active').length>0){l=left;$(this).find('a.nav-item.active').prevAll().each(function(){$(this).css('left',(l-$(this).outerWidth())+'px');$(this).css('opacity',opacity);l=l-$(this).outerWidth();opacity*=0.7})}
opacity=1;if($(this).find('a.nav-item.active').length>0){l=left+width;$(this).find('a.nav-item.active').nextAll().each(function(){$(this).css('left',l+'px');$(this).css('opacity',opacity);l=l+$(this).outerWidth();opacity*=0.7})}})}
$('div.submenu').each(function(){$(this).css('top',(h-20)+'px');h+=$(this).outerHeight()});$('article').attr('style','margin-top:'+h+'px !important')}else{$('.submenu a').removeAttr('style');$('article').removeAttr('style')}}
$(function(){marginArticle();marginArticle();$(window).on('resize',function(){marginArticle()});$.notify.defaults({globalPosition:"bottom right",className:'success'});$('input#login').focus();if(document.getElementById('html5-sortable')){new Sortable(document.getElementById('html5-sortable'),{animation:150,ghostClass:'blue-background-class',onEnd:function(evt){var i=1;$('input.project_priority').each(function(){$(this).val(i);$(this).trigger('change');i++})}})}
var cl='fadeIn';$('li.nav-item').hover(function(){$(this).addClass(cl)},function(){$(this).removeClass(cl)});$('[data-toggle="tooltip"]').tooltip();$('textarea:not(.noEditor').summernote({toolbar:[['style',['bold','italic','underline','clear']],['color',['forecolor']],['para',['ul','ol']]]});var modalConfirm=function(callback){$("a.confirmAction").on("click",function(){$("#modal-btn-yes").attr('data-id',$(this).attr('id'));$("#myModalLabel").html($(this).attr('title')+'?');$("#mi-modal").modal('show')});$("#modal-btn-yes").on("click",function(){callback($("#modal-btn-yes").attr('data-id'));$("#mi-modal").modal('hide')});$("#modal-btn-no").on("click",function(){callback(!1);$("#mi-modal").modal('hide')})};modalConfirm(function(id){if(id){$('#'+id).closest('form').submit()}});$('form').submit(function(){$("#loadMe").modal({backdrop:"static",keyboard:!0,show:!0})});$('select.select-filter').on('change',function(){var filter='';$('select.select-filter').each(function(){var name=$(this).attr('name');var v=$(this).val();if(v&&v!=0){filter+='[data-'+name+'='+v+']'}});if(filter){$('tbody').hide()}
$('tbody'+filter).show();reColorizeTable()});$('select.select-filter').trigger('change');$('input[type="range"].pc100').on('input change',function(){$(this).next('label').text($(this).val()+'%');pc100()});$('select[data-event]').on('change',function(){var fields=$('*[data-visibleif^="'+$(this).attr('data-event')+'|"]');if(fields.prop('tagName')=='INPUT'||fields.prop('tagName')=='SELECT'){fields.parent().hide();fields=$('*[data-visibleif="'+$(this).attr('data-event')+'|'+$(this).val()+'"]');fields.parent().show()}else{fields.hide();if($(this).val()!==''){fields=$('*[data-visibleif="'+$(this).attr('data-event')+'|'+$(this).val()+'"]');fields.show();fields=$('*[data-visibleif="'+$(this).attr('data-event')+'|'+'"]');fields.show()}}
var fields=$('*[data-readonlyif^="'+$(this).attr('data-event')+'|"]')});$('input[class]').on('change',function(){recalcFromInput($(this))});setTimeout(function(){var l=$('[data-percentof],[data-sumof]').length;if(l>0&&l<100){$('input[class]:visible').each(function(){recalcFromInput($(this))})}},100);reColorizeTable();pc100()});function recalcFromInput(input){var classes=input.attr('class').trim().split(' ');if($('[data-percentof]').length){classes.forEach(function(c){$('[data-percentof="'+c.replace('_pc','')+'"]:visible').each(function(){var total=0;var c2=c.replace('_pc','');for(index=0;index<$('input.'+c).length;index++){total+=(parseFloat(getTagValue('.'+c2+':eq('+index+')'))*parseFloat(getTagValue('.'+c2+'_pc:eq('+index+')'))/100)}
if($(this).prop('tagName')=='INPUT')
$(this).val(total);else $(this).text(total.toLocaleString('fr-FR'))})})}
if($('[data-sumof]').length){classes.forEach(function(c){$('[data-sumof="'+c+'"]:visible').each(function(){var c=$(this).attr('data-sumof');var sum=0;$('input.'+c).each(function(){sum+=parseFloat($(this).val())});setTagValue(this,sum)})})}}
function getTagValue(tag){if($(tag).prop('tagName')=='INPUT')
return $(tag).val();else return $(tag).text()}
function setTagValue(tag,value){if($(tag).prop('tagName')=='INPUT')
return $(tag).val(value);else return $(tag).text(value)}
function pc100(){var sum=0;$('#pc100sum').removeClass('standard-green');$('#pc100sum').removeClass('standard-orange');$('#pc100sum').removeClass('standard-red');$('input[type=range].pc100:visible').each(function(){sum+=parseFloat($(this).val())});$('#pc100sum').val(sum);if(sum<100){$('#pc100sum').addClass('standard-orange')}else if(sum>100){$('#pc100sum').addClass('standard-red')}else{$('#pc100sum').addClass('standard-green')}}
function sortSelect(selElem){var tmpAry=new Array();for(var i=0;i<selElem.options.length;i++){tmpAry[i]=new Array();tmpAry[i][0]=selElem.options[i].text+' ';tmpAry[i][1]=selElem.options[i].value}
tmpAry.sort();while(selElem.options.length>0){selElem.options[0]=null}
for(var i=0;i<tmpAry.length;i++){var op=new Option(tmpAry[i][0],tmpAry[i][1]);selElem.options[i]=op}
return}
function setOneField(entity,id,field){var value=prompt('Set a value for '+field+':');if(!value)
return;$.get('/api/save/'+entity+'/'+id+'/'+field+'/'+value);$('#'+entity+'_'+id+'_'+field).text(value);$.notify(field+" set to '"+value+"'.")}
function reColorizeTable(){setTimeout(function(){$('table:not(.no-filtering)').each(function(){var i=0;$(this).find('tbody:visible').each(function(){$(this).removeClass('standard-bg-white');$(this).removeClass('standard-bg-lightgrey');if(i%2){$(this).addClass('standard-bg-lightgrey');$(this).addClass('standard-black')}else{$(this).addClass('standard-bg-white');$(this).addClass('standard-black')}
i++})})},100)}
function makeid(length){var result='';var characters='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';var charactersLength=characters.length;for(var i=0;i<length;i++){result+=characters.charAt(Math.floor(Math.random()*charactersLength))}
return result}
function rollbackValue(link){var input=$(link).next();var rollback=input.attr('data-rollback');if(rollback){input.val(rollback);if(!input.val()&&input.find('option').length){input.val(input.find('option:contains("'+rollback+'")').attr('value'))}
input.trigger('change')}}
$(function(){$('span.editable-value > a').on('click',function(){var value=$(this).parent();var field=$(this).parent().next();value.hide();field.show();field.find('input, select').focus()});$('span.editable-field > a').on('click',function(){var value=$(this).parent().prev();var field=$(this).parent();value.show();field.hide()});$('div.note-editable').on('DOMSubtreeModified',function(){var html=$(this).html();$(this).closest('div.note-editor').prev('textarea').val(html)});$('div.note-editable').on('blur',function(){$(this).closest('div.note-editor').prev('textarea').trigger('change')});$(function(){$('select[value]').each(function(){var v=$(this).attr('value');$(this).find('option[selected]').removeAttr('selected');if(v)
$(this).find('option:contains("'+v+'")').attr('selected','selected')})});$('input[data-field], select[data-field], textarea[data-field], div.note-editable').on('change',function(){console.log('data-field');var input=$(this);if(!parseInt(input.attr('data-id')))
return;var value=input.val();if(input.is(':checkbox')&&input.prop('checked')){value=1}
if(input.is(':checkbox')&&!input.prop('checked')){value=0}
console.log(value);if(!value&&value!==0)
value='[null]';console.log(btoa(value));var position="right bottom";if(input.offset().left>$(window).width()/2)
position="left bottom";if(input.width()/$(window).width()>0.8)
position="bottom";position="left bottom";var t=input.attr('data-field').split('.');input.prev('a').remove();$.ajax({type:'GET',url:'/api/save/'+t[0]+'/'+input.attr('data-id')+'/'+t[1]+'/'+btoa(value),async:!1}).done(function(e){if(typeof e=='string'){$.notify('You\'re logged out, please refresh pasge to authentify. Changes have not been applied.',{position:'left bottom',className:'error'});return}
$.notify(e.message,e.status);console.log(e.status);var rollback=input.attr('data-rollback');input.css('width','');if(e.status=='success'&&((input.find('option').length==0&&input.val()!=rollback)||input.find('option[value='+value+']').text().trim()!=rollback)){input.before('<a href="javascript:void(0);" onclick="rollbackValue(this)"><i class="fas fa-undo-alt"></i></a> ');input.css('width',(input.outerWidth()-24)+'px')}
if(input.next('a'))
input.next('a').trigger('click');if(input.parent().prev('span.editable-value')){input.parent().prev('span.editable-value').find('span').text(input.val());if(parseInt(input.val())&&input.find('option[value='+input.val()+']').length)
input.parent().prev('span.editable-value').find('span').text(input.find('option[value='+input.val()+']').text())}}).fail(function(){$.notify('Value ['+value+'] not saved.',{position:position,className:'error'})})})});$(function(){$('body').on('DOMSubtreeModified','.valid-if-100',function(){setValidIf100($(this))});$('.valid-if-100:visible').each(function(){setValidIf100($(this))})});function setValidIf100(input){input.removeClass('standard-green');input.removeClass('standard-red');input.removeClass('standard-orange');if(getTagValue(input)==100){input.addClass('standard-green')}else{input.addClass('standard-red')}}
$(function(){$('article table.allow-export').each(function(){$(this).closest('table').after('<form method="post" action="/export-excel">'+'<input type="hidden" name="html" value=""/>'+'<input type="hidden" name="title" value=""/>'+'<a class="table-export-excel" href="javascript:void(0);"><i class="small fas fa-file-excel standard-grey standard-hover-red"></i></a>'+'</form>')});$('a.table-export-excel').on('click',function(){console.log('Export Excel');var form=$(this).parent();var table=form.prev('table');form.find('[name="html"]').val(table[0].outerHTML);form.find('[name="title"]').val($('title').text().trim());form.submit()})})